<html>

<head>
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <title>3D printer log</title>
    <style>
        .form {
            width: 600px;
            height: 1450px;
        }
        
        .log {
            width: 1000px;
            height: 500px;
        }
    </style>
    <script>
        function load_iframes() {
            let url = "https://docs.google.com/forms/d/e/1FAIpQLSejaWlD83abkvP3bQ7slYGlQRboUxgM3V4mmBK6mdlSlxBG7Q/viewform?embedded=true";
            let printer = findGetParameter("p");
            if (printer !== null) {
                url += "&entry.1923897055=Prusa+%23" + encodeURIComponent(printer);
            }
            document.getElementById("form").src = url;
        }

        function findGetParameter(parameterName) {
            var result = null,
                tmp = [];
            location.search
                .substr(1)
                .split("&")
                .forEach(function(item) {
                    tmp = item.split("=");
                    if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                });
            return result;
        }
    </script>
</head>

<body onload="load_iframes()">
    <center>
        <h1>3D printer usage form</h1>
        Please fill out this form every time you are using a 3D printer.<br/>
        <iframe class="form" id="form" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
        <hr/>
        <h1>3D-printer log entries</h1>
        The sheet can take up to a minute to update.<br/>
        <iframe class="log" id="log" src="https://docs.google.com/spreadsheets/u/4/d/e/2PACX-1vTkKY3tQdX1IJGRRgn_fU5StsUdNRxXTMTX8f563vQ8HdgFTRHIY6gzui_LLkMBzgDzSZi7HGkPaU_v/pubhtml?widget=false&headers=false&chrome=false">Loading ...</iframe>
    </center>
</body>

</html>
